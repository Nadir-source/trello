{% extends "layout.html" %}
{% block content %}

<div class="topbar">
  <div class="brand">ğŸš— Zohir Location Auto</div>
  <div class="badge">Gestion â€“ RÃ©servations (Trello)</div>
</div>

<div style="height:14px"></div>

<div class="panel">
  <h3>â• CrÃ©er une demande</h3>

  <form method="post" action="/bookings/create">
    <div class="formgrid">
      <input name="title" placeholder="Titre (ex: Clio â€“ 10â†’12 Jan)" />
      <input name="start" placeholder="DÃ©but (YYYY-MM-DD)" />
      <input name="end" placeholder="Fin (YYYY-MM-DD)" />
    </div>

    <div class="formgrid2" style="margin-top:10px">
      <input name="client" placeholder="Client (Nom / Tel)" />
      <input name="vehicle" placeholder="VÃ©hicule (ModÃ¨le / Immat)" />
      <input name="ppd" placeholder="Prix/jour (DZD)" />
    </div>

    <div class="formgrid2" style="margin-top:10px">
      <input name="deposit" placeholder="DÃ©pÃ´t (DZD)" />
      <input name="paid" placeholder="PayÃ© (DZD)" />
      <input name="doc" placeholder="CNI ou Passeport (numÃ©ro)" />
    </div>

    <div style="margin-top:10px">
      <textarea name="notes" placeholder="Notes (adresse, caution, km, etc.)"></textarea>
    </div>

    <div class="row" style="margin-top:10px">
      <button class="btn primary" type="submit">âœ… CrÃ©er la demande</button>
    </div>
  </form>
</div>

<hr>

<div class="grid">
  <div class="panel">
    <h3>ğŸ“¥ Demandes</h3>
    {% for c in demandes %}
      <div class="card">
        <div><b>{{ c.name }}</b></div>
        <div class="small">ID: {{ c.id }}</div>

        <div class="row" style="margin-top:10px">
          <form method="post" action="/bookings/move/{{ c.id }}/reserved">
            <button class="btn ok" type="submit">â¡ï¸ Confirmer</button>
          </form>
        </div>
      </div>
    {% else %}
      <div class="small">Aucune demande.</div>
    {% endfor %}
  </div>

  <div class="panel">
    <h3>ğŸ“… RÃ©servÃ©es</h3>
    {% for c in reserved %}
      <div class="card">
        <div><b>{{ c.name }}</b></div>
        <div class="small">ID: {{ c.id }}</div>

        <div class="row" style="margin-top:10px">
          <a class="btn warn" href="/bookings/contract.pdf/{{ c.id }}">ğŸ“„ Contrat FR+AR</a>

          <form method="post" action="/bookings/move/{{ c.id }}/done">
            <button class="btn ok" type="submit">âœ… Terminer</button>
          </form>
        </div>
      </div>
    {% else %}
      <div class="small">Aucune rÃ©servation.</div>
    {% endfor %}
  </div>

  <div class="panel">
    <h3>âœ… TerminÃ©es</h3>
    {% for c in closed %}
      <div class="card">
        <div><b>{{ c.name }}</b></div>
        <div class="small">ID: {{ c.id }}</div>

        <div class="row" style="margin-top:10px">
          <a class="btn" href="/bookings/contract.pdf/{{ c.id }}">ğŸ“„ Contrat FR+AR</a>
        </div>
      </div>
    {% else %}
      <div class="small">Aucune rÃ©servation terminÃ©e.</div>
    {% endfor %}
  </div>
</div>

{% endblock %}

