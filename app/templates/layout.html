<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}Zohir Location Auto{% endblock %}</title>

  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
  <div class="app-shell">

    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="brand">
        <div class="logo">Z</div>
        <div class="brand-text">
          <div class="brand-title">Zohir Location Auto</div>
          <div class="brand-sub">Trello-only ‚Ä¢ DZD ‚Ä¢ Contrat FR/EN/AR</div>
        </div>
      </div>

      <nav class="nav">
        <!-- Dashboard -->
        <a class="nav-item {% if request.path.startswith('/dashboard') %}active{% endif %}"
           href="{{ url_for('dashboard.index') }}">
          <span class="ico">üè†</span>
          <span>Dashboard</span>
        </a>

        <!-- R√©servations -->
        <a class="nav-item {% if request.path.startswith('/bookings') %}active{% endif %}"
           href="{{ url_for('bookings.index') }}">
          <span class="ico">üóìÔ∏è</span>
          <span>R√©servations</span>
        </a>

        <!-- Clients -->
        <a class="nav-item {% if request.path.startswith('/clients') %}active{% endif %}"
           href="{{ url_for('clients.index') }}">
          <span class="ico">üë•</span>
          <span>Clients</span>
        </a>

        <!-- V√©hicules -->
        <a class="nav-item {% if request.path.startswith('/vehicles') %}active{% endif %}"
           href="{{ url_for('vehicles.index') }}">
          <span class="ico">üöó</span>
          <span>V√©hicules</span>
        </a>

        <!-- Finance -->
        <a class="nav-item {% if request.path.startswith('/finance') %}active{% endif %}"
           href="{{ url_for('finance.index') }}">
          <span class="ico">üí∞</span>
          <span>Finance</span>
        </a>
      </nav>

      <div class="sidebar-footer">
        <a class="nav-item logout" href="{{ url_for('auth.logout') }}">
          <span class="ico">‚õî</span>
          <span>Logout</span>
        </a>

        <div class="tips">
          <div class="tips-title">Tips</div>
          <ul>
            <li>Cr√©e Clients/V√©hicules depuis le site</li>
            <li>Tout se fait dans le site (ton ami touche que le site)</li>
          </ul>
        </div>
      </div>
    </aside>

    <!-- MAIN -->
    <main class="main">
      <!-- TOPBAR -->
      <header class="topbar">
        <div class="topbar-left">
          {% block header_left %}{% endblock %}
        </div>

        <div class="topbar-right">
          <div class="user-pill">
            <span class="ico">üë§</span>
            <span>{{ session.get("user_name", "User") }}</span>
          </div>
          <div class="role-pill">
            <span class="ico">üîí</span>
            <span>{{ session.get("user_role", "user") }}</span>
          </div>
        </div>
      </header>

      <!-- FLASH -->
      <section class="flash-wrap">
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <div class="flash flash-{{ category }}">{{ message }}</div>
            {% endfor %}
          {% endif %}
        {% endwith %}
      </section>

      <!-- CONTENT -->
      <section class="content">
        {% block content %}{% endblock %}
      </section>
    </main>

  </div>

  <!-- ‚úÖ JS global -->
  <script src="{{ url_for('static', filename='app.js') }}"></script>

  <!-- CSS minimal de secours -->
  <style>
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; background:#070a12; color:#e9eefc; }
    .app-shell { display:flex; min-height:100vh; }
    .sidebar { width:280px; padding:18px 16px; border-right:1px solid rgba(255,255,255,.08); background:rgba(10,14,26,.7); }
    .brand { display:flex; gap:12px; align-items:center; padding:10px 10px 18px; }
    .logo { width:44px; height:44px; border-radius:14px; display:flex; align-items:center; justify-content:center;
            background:linear-gradient(135deg, #3b82f6, #a855f7); font-weight:800; }
    .brand-title { font-weight:800; font-size:16px; }
    .brand-sub { opacity:.7; font-size:12px; margin-top:2px; }
    .nav { display:flex; flex-direction:column; gap:8px; margin-top:8px; }
    .nav-item { display:flex; gap:10px; align-items:center; padding:10px 12px; border-radius:12px;
                text-decoration:none; color:inherit; background:rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.06); }
    .nav-item:hover { background:rgba(255,255,255,.06); }
    .nav-item.active { outline:2px solid rgba(59,130,246,.35); background:rgba(59,130,246,.08); }
    .ico { width:22px; text-align:center; opacity:.9; }
    .sidebar-footer { margin-top:18px; display:flex; flex-direction:column; gap:14px; }
    .tips { padding:12px; border-radius:14px; background:rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.06); }
    .tips-title { font-weight:700; margin-bottom:6px; opacity:.9; }
    .tips ul { margin:0; padding-left:18px; opacity:.75; }
    .main { flex:1; display:flex; flex-direction:column; }
    .topbar { display:flex; justify-content:space-between; align-items:center; padding:18px 22px; border-bottom:1px solid rgba(255,255,255,.08); }
    .topbar-right { display:flex; gap:10px; align-items:center; }
    .user-pill, .role-pill { display:flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px;
      background:rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.06); }
    .flash-wrap { padding:10px 22px; }
    .flash { padding:10px 12px; border-radius:12px; margin-bottom:8px; background:rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.08); }
    .flash-success { border-color: rgba(34,197,94,.35); }
    .flash-error { border-color: rgba(239,68,68,.35); }
    .content { padding:18px 22px 28px; }
  </style>
</body>
</html>

