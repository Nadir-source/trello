{% extends "layout.html" %}
{% block title %}R√©servations{% endblock %}
{% block content %}

<div class="page-head">
  <div>
    <h1>R√©servations</h1>
    <div class="muted">Trello = source unique ‚Ä¢ Actions rapides ‚Ä¢ Modal d√©tails ‚Ä¢ PDF FR/EN/AR</div>
  </div>

  <div class="stats">
    <div class="stat"><div class="stat-n">{{ stats.demandes }}</div><div class="stat-l">Demandes</div></div>
    <div class="stat"><div class="stat-n">{{ stats.reserved }}</div><div class="stat-l">R√©serv√©</div></div>
    <div class="stat"><div class="stat-n">{{ stats.ongoing }}</div><div class="stat-l">En cours</div></div>
    <div class="stat"><div class="stat-n">{{ stats.done }}</div><div class="stat-l">Termin√©</div></div>
    <div class="stat"><div class="stat-n">{{ stats.canceled }}</div><div class="stat-l">Annul√©</div></div>
  </div>
</div>

<!-- Toolbar -->
<div class="toolbar">
  <div class="toolbar-left">
    <div class="searchbox">
      <span class="ico">üîé</span>
      <input id="q" type="search" placeholder="Rechercher: client, v√©hicule, t√©l√©phone, plaque..." />
    </div>

    <select id="statusFilter" class="select">
      <option value="">Tous statuts</option>
      <option value="demandes">Demandes</option>
      <option value="reserved">R√©serv√©</option>
      <option value="ongoing">En cours</option>
      <option value="done">Termin√©</option>
      <option value="canceled">Annul√©</option>
    </select>

    <button class="btn btn-ghost" id="btnCompact" type="button">Vue compacte</button>

    <div class="tabs">
      <button class="tab active" data-tab="kanban" type="button">Kanban</button>
      <button class="tab" data-tab="calendar" type="button">Calendrier</button>
    </div>
  </div>

  <div class="toolbar-right">
    <button class="btn btn-primary" type="button" data-open="createPanel">+ Nouvelle r√©servation</button>
    <button class="btn btn-ghost" type="button" data-open="tipsPanel">‚ÑπÔ∏è Aide</button>
  </div>
</div>

<!-- Panels -->
<div class="grid2">
  <section class="card panel" id="createPanel">
    <div class="card-h">
      <h2>Nouvelle r√©servation</h2>
      <button class="btn btn-ghost btn-icon" type="button" data-close="createPanel">‚úï</button>
    </div>

    <form class="form" method="post" action="{{ url_for('bookings.create') }}">
      <div class="form-grid">
        <label>Client <input name="client_name" required /></label>
        <label>T√©l√©phone <input name="client_phone" /></label>
        <label>Adresse <input name="client_address" /></label>
        <label>Document ID <input name="doc_id" /></label>
        <label>Permis <input name="driver_license" /></label>

        <label>V√©hicule <input name="vehicle_name" required /></label>
        <label>Plaque <input name="vehicle_plate" /></label>
        <label>Mod√®le <input name="vehicle_model" /></label>
        <label>VIN <input name="vehicle_vin" /></label>

        <label>Date d√©but <input name="start_date" type="datetime-local" /></label>
        <label>Date fin <input name="end_date" type="datetime-local" /></label>

        <label>Lieu de livraison <input name="pickup_location" /></label>
        <label>Lieu de restitution <input name="return_location" /></label>

        <label>Prix / jour (DA) <input name="daily_price" type="number" /></label>
        <label>D√©p√¥t (DA) <input name="deposit" type="number" /></label>
        <label>Total (DA) <input name="total_price" type="number" /></label>

        <label>Km d√©part <input name="km_out" type="number" /></label>
        <label>Km retour <input name="km_in" type="number" /></label>

        <label>Carburant d√©part <input name="fuel_out" /></label>
        <label>Carburant retour <input name="fuel_in" /></label>

        <label class="span2">Remarques <textarea name="notes"></textarea></label>
      </div>

      <div class="opts">
        <label><input type="checkbox" name="opt_gps" /> GPS</label>
        <label><input type="checkbox" name="opt_driver" /> Chauffeur</label>
        <label><input type="checkbox" name="opt_baby_seat" /> Si√®ge b√©b√©</label>
      </div>

      <button class="btn primary" type="submit">Cr√©er</button>
    </form>
  </section>

  <section class="card panel" id="tipsPanel">
    <div class="card-h">
      <h2>Raccourcis</h2>
      <button class="btn btn-ghost btn-icon" type="button" data-close="tipsPanel">‚úï</button>
    </div>
    <div class="help">
      <p>‚úÖ Clique sur une carte ‚Üí <b>modal d√©tails</b>.</p>
      <p>‚úÖ Actions rapides (r√©serv√© / annuler / terminer).</p>
      <p>‚úÖ Supprimer = <b>archive</b> Trello.</p>
      <p>‚úÖ Recherche + filtre + mode compact.</p>
    </div>
  </section>
</div>

<!-- (Kanban, Calendrier, etc. restent identiques...) -->

{% endblock %}
